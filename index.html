<html>
<html>

<head>
  <title>Socket.IO chat</title>

  <link rel="stylesheet" href="/css/billboard.min.css" type="text/css">
</head>

<body>
  <div id="chart"></div>
  <script src="/js/d3.v5.min.js"></script>
  <!-- Step 2) Load billboard.js with style -->
  <script src="/js/billboard.min.js" type="text/javascript"></script>


  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/jquery-3.3.1.min.js"></script>
  <script>
    $(function () {
      var socket = io();

      //socket.emit('custom-event', "hewwwwlllloooo");


      var chart = bb.generate({
        data: {
          x: "x",
          columns: [ 
            ["x", "2018-01-11", "2018-01-21"],
            ["data1", 500, 200],
            ["data2", 100, 300],
            ["data3", 200, 120]
          ]
        },
        axis: {
          x: {
            type: "timeseries",
            tick: {
              format: "%m/%d"
            }
          }
        },
        bindto: "#chart"
      });
      socket.on('custom-event', function (value) {
        console.log("better update the charts " + value);
        chart.flow({
          columns: [
            ["x", "2018-02-11", "2018-02-12", "2018-02-13", "2018-02-14"],
            ["data1", Math.floor(Math.random() * 300), Math.floor(Math.random() * 300), Math.floor(Math.random() * 300), Math.floor(Math.random() * 300)],
            ["data2", Math.floor(Math.random() * 300), Math.floor(Math.random() * 300), Math.floor(Math.random() * 300), Math.floor(Math.random() * 300)],
            ["data3", Math.floor(Math.random() * 300), Math.floor(Math.random() * 300), Math.floor(Math.random() * 300), Math.floor(Math.random() * 300)]
          ],
          length: 1,
          duration: 1500
        });
      });

    });
  </script>
</body>

</html>